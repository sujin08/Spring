package kr.ac.hit.myapp.comm;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import org.springframework.web.servlet.handler.HandlerInterceptorAdapter;

import kr.ac.hit.myapp.member.MemberVo;

public class LoginInterceptor extends HandlerInterceptorAdapter {
	
	@Override
	public boolean preHandle(HttpServletRequest req, HttpServletResponse res, Object arg2) throws Exception {
		System.out.println("LoginInterceptor:preHandle!!");
		
		HttpSession session = req.getSession();
		MemberVo vo = (MemberVo) session.getAttribute("loginUser");
		if(vo == null) {
			res.sendRedirect(req.getContextPath()+"/member/login.do");
			return false;
		}
		return false;
	}
	
/*	@Override
	public void postHandle(HttpServletRequest arg0, HttpServletResponse arg1, Object arg2, ModelAndView arg3)
			throws Exception {
		System.out.println("LoginInterceptor:postHandle!!");
		
	}
	
	@Override
	public void afterCompletion(HttpServletRequest arg0, HttpServletResponse arg1, Object arg2, Exception arg3)
			throws Exception {
		System.out.println("LoginInterceptor:afterCompletion!!");

	}*/
}
